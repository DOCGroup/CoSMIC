<HTML><HEAD><SCRIPT language="JavaScript" src="../resources/script.js" type="text/javascript"></SCRIPT><TITLE>XMLGrammarPool.hpp Source File</TITLE><link href="XercesApi.css" rel="stylesheet" type="text/css"></HEAD><BODY alink="#ff0000" bgcolor="#ffffff" leftmargin="4" link="#0000ff" marginheight="4" marginwidth="4" text="#000000" topmargin="4" vlink="#0000aa"><TABLE border="0" cellpadding="0" cellspacing="0" width="620"><TR><TD align="left" height="60" rowspan="3" valign="top" width="135"><IMG border="0" height="60" hspace="0" src="../resources/logo.gif" vspace="0" width="135"></TD><TD align="left" colspan="4" height="5" valign="top" width="456"><IMG border="0" height="5" hspace="0" src="../resources/line.gif" vspace="0" width="456"></TD><TD align="left" height="60" rowspan="3" valign="top" width="29"><IMG border="0" height="60" hspace="0" src="../resources/right.gif" vspace="0" width="29"></TD></TR><TR><TD align="left" bgcolor="#0086b2" colspan="4" height="35" valign="top" width="456"><IMG alt="" border="0" height="35" hspace="0" src="../graphics/api-header.jpg" vspace="0" width="456"></TD></TR><TR><TD align="left" height="20" valign="top" width="168"><IMG border="0" height="20" hspace="0" src="../resources/bottom.gif" vspace="0" width="168"></TD><TD align="left" height="20" valign="top" width="96"><A href="http://xml.apache.org/" onMouseOut="rolloverOff('xml');" onMouseOver="rolloverOn('xml');" target="new"><IMG alt="http://xml.apache.org/" border="0" height="20" hspace="0" name="xml" onLoad="rolloverLoad('xml','../resources/button-xml-hi.gif','../resources/button-xml-lo.gif');" src="../resources/button-xml-lo.gif" vspace="0" width="96"></A></TD><TD align="left" height="20" valign="top" width="96"><A href="http://www.apache.org/" onMouseOut="rolloverOff('asf');" onMouseOver="rolloverOn('asf');" target="new"><IMG alt="http://www.apache.org/" border="0" height="20" hspace="0" name="asf" onLoad="rolloverLoad('asf','../resources/button-asf-hi.gif','../resources/button-asf-lo.gif');" src="../resources/button-asf-lo.gif" vspace="0" width="96"></A></TD><TD align="left" height="20" valign="top" width="96"><A href="http://www.w3.org/" onMouseOut="rolloverOff('w3c');" onMouseOver="rolloverOn('w3c');" target="new"><IMG alt="http://www.w3.org/" border="0" height="20" hspace="0" name="w3c" onLoad="rolloverLoad('w3c','../resources/button-w3c-hi.gif','../resources/button-w3c-lo.gif');" src="../resources/button-w3c-lo.gif" vspace="0" width="96"></A></TD></TR></TABLE><TABLE border="0" cellpadding="0" cellspacing="0" width="620"><TR><TD align="left" valign="top" width="120"><IMG border="0" height="14" hspace="0" src="../resources/join.gif" vspace="0" width="120"><BR>
  <A href="../../index.html" onMouseOut="rolloverOff('side-ext-2');" onMouseOver="rolloverOn('side-ext-2');"><IMG alt="Home" border="0" height="12" hspace="0" name="side-ext-2" onLoad="rolloverLoad('side-ext-2','../graphics/ext-2-label-2.jpg','../graphics/ext-2-label-3.jpg');" src="../graphics/ext-2-label-3.jpg" vspace="0" width="120"></A><BR>

  <IMG border="0" height="6" hspace="0" src="../resources/separator.gif" vspace="0" width="120"><BR>

  <A href="../index.html" onMouseOut="rolloverOff('side-index');" onMouseOver="rolloverOn('side-index');"><IMG alt="Readme" border="0" height="12" hspace="0" name="side-index" onLoad="rolloverLoad('side-index','../graphics/index-label-2.jpg','../graphics/index-label-3.jpg');" src="../graphics/index-label-3.jpg" vspace="0" width="120"></A><BR>
  <A href="../releases.html" onMouseOut="rolloverOff('side-releases');" onMouseOver="rolloverOn('side-releases');"><IMG alt="Release Info" border="0" height="12" hspace="0" name="side-releases" onLoad="rolloverLoad('side-releases','../graphics/releases-label-2.jpg','../graphics/releases-label-3.jpg');" src="../graphics/releases-label-3.jpg" vspace="0" width="120"></A><BR>
  <IMG border="0" height="6" hspace="0" src="../resources/separator.gif" vspace="0" width="120"><BR>
  <A href="../install.html" onMouseOut="rolloverOff('side-install');" onMouseOver="rolloverOn('side-install');"><IMG alt="Installation" border="0" height="12" hspace="0" name="side-install" onLoad="rolloverLoad('side-install','../graphics/install-label-2.jpg','../graphics/install-label-3.jpg');" src="../graphics/install-label-3.jpg" vspace="0" width="120"></A><BR>
  <A href="http://xml.apache.org/dist/xerces-c/" onMouseOut="rolloverOff('side-ext-18');" onMouseOver="rolloverOn('side-ext-18');"><IMG alt="Download" border="0" height="12" hspace="0" name="side-ext-18" onLoad="rolloverLoad('side-ext-18','../graphics/ext-18-label-2.jpg','../graphics/ext-18-label-3.jpg');" src="../graphics/ext-18-label-3.jpg" vspace="0" width="120"></A><BR>
  <A href="../build.html" onMouseOut="rolloverOff('side-build');" onMouseOver="rolloverOn('side-build');"><IMG alt="Build" border="0" height="12" hspace="0" name="side-build" onLoad="rolloverLoad('side-build','../graphics/build-label-2.jpg','../graphics/build-label-3.jpg');" src="../graphics/build-label-3.jpg" vspace="0" width="120"></A><BR>

  <IMG border="0" height="6" hspace="0" src="../resources/separator.gif" vspace="0" width="120"><BR>
  <A href="../faqs.html" onMouseOut="rolloverOff('side-faqs');" onMouseOver="rolloverOn('side-faqs');"><IMG alt="FAQs" border="0" height="12" hspace="0" name="side-faqs" onLoad="rolloverLoad('side-faqs','../graphics/faqs-label-2.jpg','../graphics/faqs-label-3.jpg');" src="../graphics/faqs-label-3.jpg" vspace="0" width="120"></A><BR>  
  <A href="../samples.html" onMouseOut="rolloverOff('side-samples');" onMouseOver="rolloverOn('side-samples');"><IMG alt="Samples" border="0" height="12" hspace="0" name="side-samples" onLoad="rolloverLoad('side-samples','../graphics/samples-label-2.jpg','../graphics/samples-label-3.jpg');" src="../graphics/samples-label-3.jpg" vspace="0" width="120"></A><BR>
  <A href="../api.html" onMouseOut="rolloverOff('side-api');" onMouseOver="rolloverOn('side-api');"><IMG alt="API Docs" border="0" height="12" hspace="0" name="side-api" onLoad="rolloverLoad('side-api','../graphics/api-label-2.jpg','../graphics/api-label-3.jpg');" src="../graphics/api-label-3.jpg" vspace="0" width="120"></A><BR>  

  <IMG border="0" height="6" hspace="0" src="../resources/separator.gif" vspace="0" width="120"><BR>
  <A href="../ApacheDOMC++Binding.html" onMouseOut="rolloverOff('side-ext-64');" onMouseOver="rolloverOn('side-ext-64');"><IMG alt="DOM C++ Binding" border="0" height="12" hspace="0" name="side-ext-64" onLoad="rolloverLoad('side-ext-64','../graphics/ext-64-label-2.jpg','../graphics/ext-64-label-3.jpg');" src="../graphics/ext-64-label-3.jpg" vspace="0" width="120"></A><BR> 
  <A href="../program.html" onMouseOut="rolloverOff('side-program');" onMouseOver="rolloverOn('side-program');"><IMG alt="Programming" border="0" height="12" hspace="0" name="side-program" onLoad="rolloverLoad('side-program','../graphics/program-label-2.jpg','../graphics/program-label-3.jpg');" src="../graphics/program-label-3.jpg" vspace="0" width="120"></A><BR>
  <A href="../migrate.html" onMouseOut="rolloverOff('side-migrate');" onMouseOver="rolloverOn('side-migrate');"><IMG alt="Migration Guide" border="0" height="12" hspace="0" name="side-migrate" onLoad="rolloverLoad('side-migrate','../graphics/migrate-label-2.jpg','../graphics/migrate-label-3.jpg');" src="../graphics/migrate-label-3.jpg" vspace="0" width="120"></A><BR>

  <IMG border="0" height="6" hspace="0" src="../resources/separator.gif" vspace="0" width="120"><BR>

  <A href="../feedback.html" onMouseOut="rolloverOff('side-feedback');" onMouseOver="rolloverOn('side-feedback');"><IMG alt="Feedback" border="0" height="12" hspace="0" name="side-feedback" onLoad="rolloverLoad('side-feedback','../graphics/feedback-label-2.jpg','../graphics/feedback-label-3.jpg');" src="../graphics/feedback-label-3.jpg" vspace="0" width="120"></A><BR>
  <A href="../bug-report.html" onMouseOut="rolloverOff('side-bug-report');" onMouseOver="rolloverOn('side-bug-report');"><IMG alt="Bug-Reporting" border="0" height="12" hspace="0" name="side-bug-report" onLoad="rolloverLoad('side-bug-report','../graphics/bug-report-label-2.jpg','../graphics/bug-report-label-3.jpg');" src="../graphics/bug-report-label-3.jpg" vspace="0" width="120"></A><BR>  
  <A href="../pdf.html" onMouseOut="rolloverOff('side-pdf');" onMouseOver="rolloverOn('side-pdf');"><IMG alt="PDF Document" border="0" height="12" hspace="0" name="side-pdf" onLoad="rolloverLoad('side-pdf','../graphics/pdf-label-2.jpg','../graphics/pdf-label-3.jpg');" src="../graphics/pdf-label-3.jpg" vspace="0" width="120"></A><BR>

  <IMG border="0" height="6" hspace="0" src="../resources/separator.gif" vspace="0" width="120"><BR>

  <A href="http://xml.apache.org/websrc/cvsweb.cgi/xml-xerces/c/" onMouseOut="rolloverOff('side-ext-96');" onMouseOver="rolloverOn('side-ext-96');"><IMG alt="CVS Repository" border="0" height="12" hspace="0" name="side-ext-96" onLoad="rolloverLoad('side-ext-96','../graphics/ext-96-label-2.jpg','../graphics/ext-96-label-3.jpg');" src="../graphics/ext-96-label-3.jpg" vspace="0" width="120"></A><BR>
  <A href="http://marc.theaimsgroup.com/?l=xerces-c-dev" onMouseOut="rolloverOff('side-ext-98');" onMouseOver="rolloverOn('side-ext-98');"><IMG alt="Mail Archive" border="0" height="12" hspace="0" name="side-ext-98" onLoad="rolloverLoad('side-ext-98','../graphics/ext-98-label-2.jpg','../graphics/ext-98-label-3.jpg');" src="../graphics/ext-98-label-3.jpg" vspace="0" width="120"></A><BR>

<IMG border="0" height="14" hspace="0" src="../resources/close.gif" vspace="0" width="120"><BR></TD><TD align="left" valign="top" width="500"><TABLE border="0" cellpadding="3" cellspacing="0"><TR><TD>
    <TABLE border="0" cellpadding="0" cellspacing="0" width="494"><TR><TD bgcolor="#FFFFFF" colspan="2" width="494"><TABLE border="0" cellpadding="0" cellspacing="0" width="494"><TR><TD bgcolor="#039acc" height="1" width="1"><IMG border="0" height="1" hspace="0" src="../resources/void.gif" vspace="0" width="1"></TD><TD bgcolor="#039acc" height="1" width="492"><IMG border="0" height="1" hspace="0" src="../resources/void.gif" vspace="0" width="492"></TD><TD bgcolor="#0086b2" height="1" width="1"><IMG border="0" height="1" hspace="0" src="../resources/void.gif" vspace="0" width="1"></TD></TR><TR><TD bgcolor="#039acc" width="1"><IMG border="0" height="1" hspace="0" src="../resources/void.gif" vspace="0" width="1"></TD><TD bgcolor="#0086b2" width="492"><FONT color="#ffffff" face="arial,helvetica,sanserif" size="+1"><IMG border="0" height="2" hspace="0" src="../resources/void.gif" vspace="0" width="2"><B>API Docs for SAX and DOM</B></FONT></TD><TD bgcolor="#017299" width="1"><IMG border="0" height="1" hspace="0" src="../resources/void.gif" vspace="0" width="1"></TD></TR><TR><TD bgcolor="#0086b2" height="1" width="1"><IMG border="0" height="1" hspace="0" src="../resources/void.gif" vspace="0" width="1"></TD><TD bgcolor="#017299" height="1" width="492"><IMG border="0" height="1" hspace="0" src="../resources/void.gif" vspace="0" width="492"></TD><TD bgcolor="#017299" height="1" width="1"><IMG border="0" height="1" hspace="0" src="../resources/void.gif" vspace="0" width="1"></TD></TR></TABLE></TD></TR><TR><TD width="10">&nbsp;</TD><TD width="484"><FONT color="#000000" face="arial,helvetica,sanserif">

	    <P>
<!-- Generated by Doxygen 1.2.14 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>XMLGrammarPool.hpp</h1><a href="XMLGrammarPool_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment"> * The Apache Software License, Version 1.1</font>
00003 <font class="comment"> *</font>
00004 <font class="comment"> * Copyright (c) 1999-2003 The Apache Software Foundation.  All rights</font>
00005 <font class="comment"> * reserved.</font>
00006 <font class="comment"> *</font>
00007 <font class="comment"> * Redistribution and use in source and binary forms, with or without</font>
00008 <font class="comment"> * modification, are permitted provided that the following conditions</font>
00009 <font class="comment"> * are met:</font>
00010 <font class="comment"> *</font>
00011 <font class="comment"> * 1. Redistributions of source code must retain the above copyright</font>
00012 <font class="comment"> *    notice, this list of conditions and the following disclaimer.</font>
00013 <font class="comment"> *</font>
00014 <font class="comment"> * 2. Redistributions in binary form must reproduce the above copyright</font>
00015 <font class="comment"> *    notice, this list of conditions and the following disclaimer in</font>
00016 <font class="comment"> *    the documentation and/or other materials provided with the</font>
00017 <font class="comment"> *    distribution.</font>
00018 <font class="comment"> *</font>
00019 <font class="comment"> * 3. The end-user documentation included with the redistribution,</font>
00020 <font class="comment"> *    if any, must include the following acknowledgment:</font>
00021 <font class="comment"> *       "This product includes software developed by the</font>
00022 <font class="comment"> *        Apache Software Foundation (http://www.apache.org/)."</font>
00023 <font class="comment"> *    Alternately, this acknowledgment may appear in the software itself,</font>
00024 <font class="comment"> *    if and wherever such third-party acknowledgments normally appear.</font>
00025 <font class="comment"> *</font>
00026 <font class="comment"> * 4. The names "Xerces" and "Apache Software Foundation" must</font>
00027 <font class="comment"> *    not be used to endorse or promote products derived from this</font>
00028 <font class="comment"> *    software without prior written permission. For written</font>
00029 <font class="comment"> *    permission, please contact apache\@apache.org.</font>
00030 <font class="comment"> *</font>
00031 <font class="comment"> * 5. Products derived from this software may not be called "Apache",</font>
00032 <font class="comment"> *    nor may "Apache" appear in their name, without prior written</font>
00033 <font class="comment"> *    permission of the Apache Software Foundation.</font>
00034 <font class="comment"> *</font>
00035 <font class="comment"> * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED</font>
00036 <font class="comment"> * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES</font>
00037 <font class="comment"> * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE</font>
00038 <font class="comment"> * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR</font>
00039 <font class="comment"> * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</font>
00040 <font class="comment"> * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</font>
00041 <font class="comment"> * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF</font>
00042 <font class="comment"> * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND</font>
00043 <font class="comment"> * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,</font>
00044 <font class="comment"> * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT</font>
00045 <font class="comment"> * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF</font>
00046 <font class="comment"> * SUCH DAMAGE.</font>
00047 <font class="comment"> * ====================================================================</font>
00048 <font class="comment"> *</font>
00049 <font class="comment"> * This software consists of voluntary contributions made by many</font>
00050 <font class="comment"> * individuals on behalf of the Apache Software Foundation, and was</font>
00051 <font class="comment"> * originally based on software copyright (c) 1999, International</font>
00052 <font class="comment"> * Business Machines, Inc., http://www.ibm.com .  For more information</font>
00053 <font class="comment"> * on the Apache Software Foundation, please see</font>
00054 <font class="comment"> * &lt;http://www.apache.org/&gt;.</font>
00055 <font class="comment"> */</font>
00056 
00057 <font class="comment">/*</font>
00058 <font class="comment"> * $Log$
00058 <font class="comment"> * Revision 1.1  2004/03/22 23:43:15  kitty
00058 <font class="comment"> * Initial revision
00058 <font class="comment"> *</font>
00059 <font class="comment"> * Revision 1.11  2003/11/25 15:10:44  jberry</font>
00060 <font class="comment"> * Eliminate some compiler warnings concerning comments inside of comments</font>
00061 <font class="comment"> *</font>
00062 <font class="comment"> * Revision 1.10  2003/11/21 22:34:45  neilg</font>
00063 <font class="comment"> * More schema component model implementation, thanks to David Cargill.</font>
00064 <font class="comment"> * In particular, this cleans up and completes the XSModel, XSNamespaceItem,</font>
00065 <font class="comment"> * XSAttributeDeclaration and XSAttributeGroup implementations.</font>
00066 <font class="comment"> *</font>
00067 <font class="comment"> * Revision 1.9  2003/11/06 21:53:52  neilg</font>
00068 <font class="comment"> * update grammar pool interface so that cacheGrammar(Grammar) can tell the caller whether the grammar was accepted.  Also fix some documentation errors.</font>
00069 <font class="comment"> *</font>
00070 <font class="comment"> * Revision 1.8  2003/11/06 15:30:06  neilg</font>
00071 <font class="comment"> * first part of PSVI/schema component model implementation, thanks to David Cargill.  This covers setting the PSVIHandler on parser objects, as well as implementing XSNotation, XSSimpleTypeDefinition, XSIDCDefinition, and most of XSWildcard, XSComplexTypeDefinition, XSElementDeclaration, XSAttributeDeclaration and XSAttributeUse.</font>
00072 <font class="comment"> *</font>
00073 <font class="comment"> * Revision 1.7  2003/11/05 18:19:09  peiyongz</font>
00074 <font class="comment"> * Documentation update</font>
00075 <font class="comment"> *</font>
00076 <font class="comment"> * Revision 1.6  2003/10/29 16:16:48  peiyongz</font>
00077 <font class="comment"> * GrammarPool' serialization/deserialization support</font>
00078 <font class="comment"> *</font>
00079 <font class="comment"> * Revision 1.5  2003/10/10 18:36:03  neilg</font>
00080 <font class="comment"> * update XMLGrammarPool interface to make expected behaviour of locked pools better specified, and to add the capability to generate XSModels</font>
00081 <font class="comment"> *</font>
00082 <font class="comment"> * Revision 1.4  2003/09/16 18:30:54  neilg</font>
00083 <font class="comment"> * make Grammar pool be responsible for creating and owning URI string pools.  This is one more step towards having grammars be independent of the parsers involved in their creation</font>
00084 <font class="comment"> *</font>
00085 <font class="comment"> * Revision 1.3  2003/09/02 08:59:02  gareth</font>
00086 <font class="comment"> * Added API to get enumerator of grammars.</font>
00087 <font class="comment"> *</font>
00088 <font class="comment"> * Revision 1.2  2003/07/31 17:02:42  peiyongz</font>
00089 <font class="comment"> * Grammar embed GrammarDescription</font>
00090 <font class="comment"> *</font>
00091 <font class="comment"> * Revision 1.1  2003/06/20 18:37:39  peiyongz</font>
00092 <font class="comment"> * Stateless Grammar Pool :: Part I</font>
00093 <font class="comment"> *</font>
00094 <font class="comment"> * $Id$</font>
00095 <font class="comment"> *</font>
00096 <font class="comment"> */</font>
00097 
00098 <font class="preprocessor">#if !defined(XMLGRAMMARPOOL_HPP)</font>
<a name="l00099"></a><a class="code" href="XMLGrammarPool_8hpp.html#a0">00099</a> <font class="preprocessor"></font><font class="preprocessor">#define XMLGRAMMARPOOL_HPP</font>
00100 <font class="preprocessor"></font>
00101 <font class="preprocessor">#include &lt;<a class="code" href="PlatformUtils_8hpp.html">xercesc/util/PlatformUtils.hpp</a>&gt;</font>
00102 <font class="preprocessor">#include &lt;xercesc/util/RefHashTableOf.hpp&gt;</font>
00103 <font class="preprocessor">#include &lt;<a class="code" href="XMemory_8hpp.html">xercesc/util/XMemory.hpp</a>&gt;</font>
00104 <font class="preprocessor">#include &lt;<a class="code" href="XSModel_8hpp.html">xercesc/framework/psvi/XSModel.hpp</a>&gt;</font>
00105 
00106 
00107 <a class="code" href="XercesDefs_8hpp.html#a2">XERCES_CPP_NAMESPACE_BEGIN</a>
00108 
<a name="l00109"></a><a class="code" href="XMLGrammarPool_8hpp.html#a1">00109</a> <font class="keyword">class </font><a class="code" href="XMLGrammarPool_8hpp.html#a1">Grammar</a>;
00110 <font class="keyword">class </font><a class="code" href="classXMLGrammarDescription.html">XMLGrammarDescription</a>;
00111 <font class="keyword">class </font>DTDGrammar;
00112 <font class="keyword">class </font>SchemaGrammar;
00113 <font class="keyword">class </font><a class="code" href="classXMLDTDDescription.html">XMLDTDDescription</a>;
00114 <font class="keyword">class </font><a class="code" href="classXMLSchemaDescription.html">XMLSchemaDescription</a>;
00115 <font class="keyword">class </font><a class="code" href="XSNamedMap_8hpp.html#a1">XMLStringPool</a>;
00116 <font class="keyword">class </font><a class="code" href="classBinInputStream.html">BinInputStream</a>;
00117 <font class="keyword">class </font><a class="code" href="classBinOutputStream.html">BinOutputStream</a>;
00118 
<a name="l00119"></a><a class="code" href="classXMLGrammarPool.html">00119</a> <font class="keyword">class </font><a class="code" href="XercesDefs_8hpp.html#a9"></a> <a class="code" href="classXMLGrammarPool.html">XMLGrammarPool</a> : <font class="keyword">public</font> <a class="code" href="classXMemory.html">XMemory</a>
00120 {
00121 <font class="keyword">public</font> :
00122     <font class="comment">// -----------------------------------------------------------------------</font>
00124 <font class="comment"></font>    <font class="comment">// -----------------------------------------------------------------------</font>
00126 <font class="comment"></font>
<a name="l00131"></a><a class="code" href="classXMLGrammarPool.html#z284_0">00131</a> <font class="comment"></font>    <font class="keyword">virtual</font> ~<a class="code" href="classXMLGrammarPool.html">XMLGrammarPool</a>(){};
00133 
00134     <font class="comment">// -----------------------------------------------------------------------</font>
00136 <font class="comment"></font>    <font class="comment">// -----------------------------------------------------------------------</font>
00138 <font class="comment"></font>
00152 <font class="comment"></font>    <font class="keyword">virtual</font> <font class="keywordtype">bool</font>           cacheGrammar(<a class="code" href="XMLGrammarPool_8hpp.html#a1">Grammar</a>* <font class="keyword">const</font>               gramToCache) = 0;
00153     
00161     <font class="keyword">virtual</font> <a class="code" href="XMLGrammarPool_8hpp.html#a1">Grammar</a>*       retrieveGrammar(<a class="code" href="classXMLGrammarDescription.html">XMLGrammarDescription</a>* <font class="keyword">const</font> gramDesc) = 0;
00162     
00163         
00172     <font class="keyword">virtual</font> <a class="code" href="XMLGrammarPool_8hpp.html#a1">Grammar</a>*       orphanGrammar(<font class="keyword">const</font> XMLCh* <font class="keyword">const</font> nameSpaceKey) = 0;  
00173 
00174 
00180     <font class="keyword">virtual</font> RefHashTableOfEnumerator&lt;Grammar&gt; getGrammarEnumerator() <font class="keyword">const</font> = 0;
00181 
00188     <font class="keyword">virtual</font> <font class="keywordtype">bool</font>           clear() = 0;
00189         
00199     <font class="keyword">virtual</font> <font class="keywordtype">void</font>           lockPool() = 0;
00200     
00211     <font class="keyword">virtual</font> <font class="keywordtype">void</font>           unlockPool() = 0;
00212 
00214 
00215     <font class="comment">// -----------------------------------------------------------------------</font>
00217 <font class="comment"></font>    <font class="comment">// -----------------------------------------------------------------------</font>
00219 <font class="comment"></font>
00224 <font class="comment"></font>    <font class="keyword">virtual</font> DTDGrammar*            createDTDGrammar() = 0;
00225 
00230     <font class="keyword">virtual</font> SchemaGrammar*         createSchemaGrammar() = 0;
00231                     
00236     <font class="keyword">virtual</font> <a class="code" href="classXMLDTDDescription.html">XMLDTDDescription</a>*     createDTDDescription(<font class="keyword">const</font> XMLCh* <font class="keyword">const</font> rootName) = 0;
00241     <font class="keyword">virtual</font> <a class="code" href="classXMLSchemaDescription.html">XMLSchemaDescription</a>*  createSchemaDescription(<font class="keyword">const</font> XMLCh* <font class="keyword">const</font> targetNamespace) = 0;
00242 
00244 
00245     <font class="comment">// -----------------------------------------------------------------------</font>
00247 <font class="comment"></font>    <font class="comment">// -----------------------------------------------------------------------                                                        </font>
00249 <font class="comment"></font>
00250     <font class="comment">/***</font>
00251 <font class="comment">      * Return an XSModel derived from the components of all SchemaGrammars</font>
00252 <font class="comment">      * in the grammar pool.  If the pool is locked, this should</font>
00253 <font class="comment">      * be a thread-safe operation.  It should return null if and only if</font>
00254 <font class="comment">      * the pool is empty.</font>
00255 <font class="comment">      *</font>
00256 <font class="comment">      * Calling getXSModel() on an unlocked grammar pool may result in the</font>
00257 <font class="comment">      * creation of a new XSModel with the old XSModel being deleted.  The</font>
00258 <font class="comment">      * function will return a different address for the XSModel if it has</font>
00259 <font class="comment">      * changed.</font>
00260 <font class="comment">      */</font>
00261     <font class="keyword">virtual</font> <a class="code" href="classXSModel.html">XSModel</a> *getXSModel() = 0;
00262     
00263     <font class="comment">// @}</font>
00264 
00265     <font class="comment">// -----------------------------------------------------------------------</font>
00267 <font class="comment"></font>    <font class="comment">// -----------------------------------------------------------------------                                                        </font>
00269 <font class="comment"></font>
<a name="l00274"></a><a class="code" href="classXMLGrammarPool.html#z288_0">00274</a> <font class="comment"></font>    <font class="keyword">inline</font> <a class="code" href="classMemoryManager.html">MemoryManager</a>* <font class="keyword">const</font>    getMemoryManager()
00275     {
00276         <font class="keywordflow">return</font> fMemMgr;
00277     }
00278 
00285     <font class="keyword">virtual</font> <a class="code" href="XSNamedMap_8hpp.html#a1">XMLStringPool</a> *getURIStringPool() = 0;
00287 
00288     <font class="comment">// -----------------------------------------------------------------------</font>
00290 <font class="comment"></font>    <font class="comment">// -----------------------------------------------------------------------                                                        </font>
00291 
00292     <font class="comment">/***</font>
00293 <font class="comment">      *</font>
00294 <font class="comment">      * 1. Context: Serialize/Deserialize All Grammars In One Session</font>
00295 <font class="comment">      *</font>
00296 <font class="comment">      *    Since it is common that a declaration in one grammar may reference </font>
00297 <font class="comment">      *    to definitions in other grammars, it is required to serialize those </font>
00298 <font class="comment">      *    related (or interdependent) grammars in to one persistent data store </font>
00299 <font class="comment">      *    in one serialization session (storing), and deserialize them from the</font>
00300 <font class="comment">      *    persistent data store in one deserialization session (loading) back</font>
00301 <font class="comment">      *    to the grammar pool.    </font>
00302 <font class="comment">      *</font>
00303 <font class="comment">      * 2. Multiple serializations</font>
00304 <font class="comment">      *</font>
00305 <font class="comment">      *    It is acceptable that client application requests more than one </font>
00306 <font class="comment">      *    grammar serialization on a particular grammar pool, to track the </font>
00307 <font class="comment">      *    different grammars cached, or for whatever reasons that client </font>
00308 <font class="comment">      *    application is interested in. </font>
00309 <font class="comment">      *</font>
00310 <font class="comment">      * 3. Multiple deserializations</font>
00311 <font class="comment">      * </font>
00312 <font class="comment">      *    Request for grammar deserialization either after the grammar pool has </font>
00313 <font class="comment">      *    its own cached grammars, or request for more than one grammar </font>
00314 <font class="comment">      *    deserialization, may cause undesired and unpredictable consequence</font>
00315 <font class="comment">      *    and therefore client application shall be aware that individual </font>
00316 <font class="comment">      *    implementationis may NOT support this.</font>
00317 <font class="comment">      *</font>
00318 <font class="comment">      *    However it is strongly recommended that the client application requests </font>
00319 <font class="comment">      *    no more than one grammar deserialization even a particular implementation</font>
00320 <font class="comment">      *    may allow multiple deserializations.</font>
00321 <font class="comment">      *</font>
00322 <font class="comment">      * 4. Locking</font>
00323 <font class="comment">      *</font>
00324 <font class="comment">      *    Both serialization and deserialization requires to lock the grammar pool</font>
00325 <font class="comment">      *    before operation and unlock after operation. In the case the grammar pool</font>
00326 <font class="comment">      *    is locked by a third party, the request for serialization/deserialization</font>
00327 <font class="comment">      *    will NOT be entertained.</font>
00328 <font class="comment">      *</font>
00329 <font class="comment">      * 5. Versioning</font>
00330 <font class="comment">      *</font>
00331 <font class="comment">      *    The Persistent data store has a version tag to be verified during </font>
00332 <font class="comment">      *    deserialization, thus a grammar pool may decide if it supports</font>
00333 <font class="comment">      *    a binary data created by a different release of Xerces.</font>
00334 <font class="comment">      * </font>
00335 <font class="comment">      * 6. Clean up</font>
00336 <font class="comment">      *</font>
00337 <font class="comment">      *    The client application shall be aware that in the event of an exception</font>
00338 <font class="comment">      *    thrown due to a corrupted data store during deserialization, implementation</font>
00339 <font class="comment">      *    may not be able to clean up all resources allocated, and therefore it is </font>
00340 <font class="comment">      *    client application's responsibility to clean up those unreleased resources.</font>
00341 <font class="comment">      *</font>
00342 <font class="comment">      *</font>
00343 <font class="comment">      */</font>
00344     <font class="keyword">virtual</font> <font class="keywordtype">void</font>     serializeGrammars(<a class="code" href="classBinOutputStream.html">BinOutputStream</a>* <font class="keyword">const</font>)  = 0; 
00345     <font class="keyword">virtual</font> <font class="keywordtype">void</font>     deserializeGrammars(<a class="code" href="classBinInputStream.html">BinInputStream</a>* <font class="keyword">const</font>) = 0;       
00346        
00347 <font class="keyword">protected</font> :
00348     <font class="comment">// -----------------------------------------------------------------------</font>
00350 <font class="comment"></font>    <font class="comment">// -----------------------------------------------------------------------</font>
<a name="l00352"></a><a class="code" href="classXMLGrammarPool.html#z289_0">00352</a> <font class="comment">    XMLGrammarPool(MemoryManager* const memMgr = XMLPlatformUtils::fgMemoryManager)</font>
00353     :fMemMgr(memMgr)
00354     {
00355     };
00357 
00358 <font class="keyword">private</font> :
00359     <font class="comment">// -----------------------------------------------------------------------</font>
00361 <font class="comment"></font>    <font class="comment">// -----------------------------------------------------------------------</font>
00363 <font class="comment">    XMLGrammarPool(const XMLGrammarPool&amp; );</font>
00364     <a class="code" href="classXMLGrammarPool.html">XMLGrammarPool</a>&amp; operator=(<font class="keyword">const</font> <a class="code" href="classXMLGrammarPool.html">XMLGrammarPool</a>&amp; );
00366 
00367     <font class="comment">// -----------------------------------------------------------------------</font>
00368     <font class="comment">//</font>
00369     <font class="comment">// fMemMgr: plugged-in (or defaulted-in) memory manager</font>
00370     <font class="comment">//          not owned </font>
00371     <font class="comment">//          no reset after initialization</font>
00372     <font class="comment">//</font>
00373     <font class="comment">// -----------------------------------------------------------------------</font>
00374     
00375     <a class="code" href="classMemoryManager.html">MemoryManager</a>* <font class="keyword">const</font>  fMemMgr;
00376 
00377 };
00378 
00379 <a class="code" href="XercesDefs_8hpp.html#a3">XERCES_CPP_NAMESPACE_END</a>
00380 
00381 <font class="preprocessor">#endif</font>
</pre></div>    </FONT></TD></TR></TABLE><BR>
</TD></TR></TABLE></TD></TR></TABLE><BR><TABLE border="0" cellpadding="0" cellspacing="0" width="620"><TR><TD bgcolor="#0086b2"><IMG height="1" src="images/dot.gif" width="1" alt=""></TD></TR><TR><TD align="center"><FONT color="#0086b2" size="-1"><I>
              Copyright &copy; 2004 The Apache Software Foundation.
              All Rights Reserved.
            </I></FONT></TD></TR></TABLE></BODY></HTML>
